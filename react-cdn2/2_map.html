<!DOCTYPE html>
<html lang="ja">
<!--
  Leaflet
-->
<head>
  <title>ReactCDN</title>
  <meta charset="utf-8">
  <meta name="viewport" content="initail-scale=1, width=device-width">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@mui/material@latest/umd/material-ui.development.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<style>
  #map {
    height: 600px;
  }
</style>
</head>
<body>
  <div id="app"></div>
  <script type="text/babel">
    const { useState, useEffect } = React
    const { Container, Card, CardHeader, CardContent } = MaterialUI

    const MapPage = (props) => {
      const [markers, setMarkers] = useState([])
      useEffect(() => {
        const map = L.map('map').setView([36, 139], 8)
        const tileLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}', {
          attribution: "<a href='https://developers.google.com/maps/documentation' target='_blank'>Google Map</a>"
        })
        tileLayer.addTo(map)

        map.on('click', function (e) {
          const marker = L.marker([e.latlng.lat, e.latlng.lng]).addTo(map).bindPopup('<b>Name</b><br />Comment.').openPopup()
          setMarkers(markers.push({ marker: marker, lat: e.latlng.lat, lng: e.latlng.lng }))
        })
      }, [])

      return (
        <Card sx={{ width: "800px", m: "50px auto" }}>
          <CardHeader title="Map" />
          <CardContent>
            <div id="map"></div>
          </CardContent>
        </Card>
      )
    }

    const App = () => {
      return (
        <Container>
          <MapPage />
        </Container>
      )
    }
    const container = document.getElementById("app")
    const root = ReactDOM.createRoot(container)
    root.render(<App />)
  </script>
</body>
</html>
